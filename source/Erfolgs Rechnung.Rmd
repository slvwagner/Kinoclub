---
title: "Erfolgsrechnug Kinoklub"
author: "Nadia Wagner"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Erfolg
Der Erfolg berechnet sich aus dem Gewinn der Eintritte und des Kiosks. 

```{r echo=FALSE}
df_GV_Vorfuehrung|>
  left_join(df_show,by = join_by(Datum, suisa_nr))|>
  select(Datum, Anfang, suisa_nr, Filmtitel, `Gewinn/Verlust [CHF]`)|>
  arrange(Datum)|> 
  mutate(Datum = paste0(lubridate::day(Datum),".", lubridate::month(Datum),".", lubridate::year(Datum)))|>
  knitr::kable()
```

```{r echo=FALSE}
df_GV_Vorfuehrung|>
  reframe(`Total Gewinn/Verlust [CHF]` = sum(`Gewinn/Verlust [CHF]`)
          )|>
  knitr::kable()
```


### Kino Eintritte Übersicht

```{r echo=FALSE}

df_Eintritt|>
  select(Platzkategorie, Verkaufspreis, Anzahl, Umsatz, Zahlend)|>
  group_by(Zahlend)|>
  reframe(Anzahl = sum(Anzahl),
          Umsatz = sum(Umsatz))|>
  mutate(Zahlend = if_else(Zahlend, "Zahlend", "Gratis"))|>
  rename(`Umsatz [CHF]` = `Umsatz`,
         `Verkaufspreis [CHF]`=`Umsatz`,
         Eintritt = Zahlend)|>
  knitr::kable()

```

```{r echo=FALSE}

df_Eintritt|>
  select(Platzkategorie, Verkaufspreis, Anzahl, Umsatz)|>
  reframe(Eintritt = "Total",
          Anzahl = sum(Anzahl),
          Umsatz = sum(Umsatz))|>
  rename(`Umsatz [CHF]` = `Umsatz`)|>
  knitr::kable()

```


### Eintritte-Gewinn pro Vorführung

```{r echo=FALSE}
df_GV_Eintritt|>
  rename(`Umsatz [CHF]` = Umsatz,
         `Gewinn/Verlust [CHF]` = `Gewinn/Verlust [CHF]`
         )|>
  select(-`SUISA-Abzug [%]`, `Verleiher-Abzug [%]`,-Anfang, - suisa_nr)|>
  mutate(Datum = paste0(lubridate::day(Datum),".", lubridate::month(Datum),".", lubridate::year(Datum)))|>
  knitr::kable()
```


```{r echo=FALSE}
df_GV_Eintritt|>
  reframe(`Umsatz [CHF]` = sum(Umsatz),
          `SUISA-Abzug [CHF]` = sum(`SUISA-Abzug [CHF]`),
          `Verleiher-Abzug [CHF]` = sum(`Verleiher-Abzug [CHF]`),
          `Gewinn/Verlust [CHF]` = sum(`Gewinn/Verlust [CHF]`)
         )|>
  knitr::kable()

```


### Kiosk-Gewinn pro Vorführung 
```{r echo=FALSE}
df_GV_Kiosk|>
  rename(`Umsatz [CHF]` = Kassiert,
         `Gewinn [CHF]` = Gewinn)|>
  mutate(Datum = paste0(lubridate::day(Datum),".", lubridate::month(Datum),".", lubridate::year(Datum)))|>
  knitr::kable()

```


```{r echo=FALSE}
df_GV_Kiosk|>
  reframe(Umsatz = sum(Kassiert),
          Gewinn = sum(Gewinn)
          )|>
  rename(`Umsatz [CHF]` = Umsatz,
         `Gewinn [CHF]` = Gewinn)|>
  knitr::kable()

```

### Detailierte Einsicht
Für eine Detailierte Einsicht in Besucherzahlen, Umsatz pro Gast und Kioskverkäufe das Dokument Statistik einsehen.

